<html>
  <head>
    <title>Alice In Wonderland Vis</title>
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/style.css">
  </head>
<body>
  <h1>Alice In Wonderland</h1>
  <div class="content">
    <div id="vis"></div>
  </div>

  <script type="text/javascript" src="vendor/d3.js" charset="utf-8"></script>
  <script>

d3.csv('data/alice.csv', function(data) {

    var values = data.map( function(d) {
        return +d.len;
    });

    var unit = 15;
    var x_num = Math.floor(Math.sqrt(values.length)),
        y_num = x_num + 1;

    console.log(x_num, y_num);

    var vis = d3.select('#vis').append('svg').attr({'height': y_num * unit,
                                                    'width': x_num * unit });
    var min = d3.min(values);
    var max = d3.max(values);
    
    var scale = d3.scale.log();
    scale.domain([min, max]);
    scale.range(['#C8E9A0', '#172D2C']);
    
    vis.selectAll('rect')
      .data(values).enter()
      .append('rect')
      .attr({
            'x': function(d,i) { return (i%x_num) * unit;},
            'y': function(d,i) { return Math.floor(i/x_num) * unit;},
            'width': unit,
            'height': unit,
            'fill': function(d){ return scale(d);}
          });
});


  </script>
</body>
</html>
